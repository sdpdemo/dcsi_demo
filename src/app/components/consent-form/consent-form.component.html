<div class="consent-form-container">
  <div class="consent-header" *ngIf="formData?.branding">
    <h3>{{ formData?.branding?.companyName }}</h3>
  </div>

  <div class="consent-loading" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Loading consent form...</p>
  </div>

  <div class="consent-error" *ngIf="errorMessage && !isLoading">
    <p>{{ errorMessage }}</p>
  </div>

  <div class="consent-permissions" *ngIf="!isLoading && !errorMessage">
    <div class="permission-block" *ngFor="let permission of permissions">
      <div class="permission-text" [innerHTML]="permission.text"></div>

      <div class="permission-options" [ngSwitch]="permission.elementType">
        <div *ngSwitchCase="'CHECKBOX'">
          <label *ngFor="let option of permission.options" class="option-label">
            <input
              type="checkbox"
              [name]="permission.id"
              [value]="option"
              (change)="onCheckboxChange(permission.id, option, $event)"
            />
            <span>{{ option }}</span>
          </label>
        </div>

        <div *ngSwitchCase="'RADIOBUTTON'">
          <label *ngFor="let option of permission.options" class="option-label">
            <input
              type="radio"
              [name]="permission.id"
              [value]="option"
              (change)="onRadioChange(permission.id, option)"
            />
            <span>{{ option }}</span>
          </label>
        </div>

        <div *ngSwitchCase="'DROPDOWN'">
          <select
            [name]="permission.id"
            (change)="onDropdownChange(permission.id, $event)"
            class="dropdown-select"
          >
            <option value="">Select an option</option>
            <option *ngFor="let option of permission.options" [value]="option">
              {{ option }}
            </option>
          </select>
        </div>
      </div>
    </div>

    <p class="consent-note">* At least one option must be selected</p>
  </div>
</div>
